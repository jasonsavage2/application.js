/* application.js v1.6.1 engauge.com 2013
 * jQuery port 
 */
(function(e,g){function p(){if(!l)if(m.length){l=!0;var a=r(m.shift());g.getScript(a,function(){l=!1;p()})}else for(;n.length;)a=n.shift(),"function"===typeof a.init&&a.init()}function r(a){!0!==/^(http|\/\/)/.test(a)&&(a=app.config.vendorPath+a,!0!==/\.js$/.test(a)&&(a+=".js"));return a}function h(a){return"undefined"===typeof a||null===a}function k(a,b){a.push.apply(a,b||[]);return a}var q={},f={},m=[],n=[],l=!1,s=Math.floor(9999*Math.random()),d={};e.app=e.app||{};e.app.config={version:"1.6.1", currentPage:null,vendorPath:"/assets/js/vendor/"};e.app.startup=function(a,b){if("function"===typeof b){var c="mod"+s++;app.module(c,{init:b});b=[c]}"string"===typeof b&&(b=[b]);a=a.toLowerCase().replace(/(^\/+|\/+$)/g,"");f[a]=f[a]||[];k(f[a],b)};e.app.module=function(a,b){return h(b)?q[a]:q[a]=b};e.app.subscribe=function(a,b){b.handleNotifications=b.handleNotifications||function(a,b){};d[a]=d[a]||[];d[a].push(b)};e.app.unsubscribe=function(a,b){h(d[a])||d[a].splice(g.inArray(b,d[a]),1)};e.app.notify= function(a,b){for(var c=d[a]||[];c.length;)c.shift().handleNotifications(a,b)};g(document).on("ready",function(){var a=app.config,b;null!==app.config.currentPage?b=app.config.currentPage:(b=e.location.pathname.toLowerCase(),b=b.replace(/[\?#].*$/,""),b=b.replace(/(^\/+|\/+$)/g,""),0===b.length&&(b="home/index"),!0!==/\//.test(b)&&(b+="/index"));a.currentPage=b;a=k([],f.global);b=app.config.currentPage.split("/");var c="";h(f["*"+b[0]])||(b[0]="*"+b[0],a=[]);for(var d=0,g=b.length;d<g;d++)c+=b[d], k(a,f[c]),c+="/";for(;a.length;)b=a.shift(),c=app.module(b),h(c)?console.log("module not found: "+b):(k(m,c.requires),n.push(c),p())})})(window,jQuery);