(function(c){var a={id:null,top:null,width:null,height:null,content:null,selector:null,open:null,close:null},b=null,d={init:function(e){a=c.extend(a,e);null===b&&d.create();b.find(".content").html("");b.find(".loader").show();null!==a.selector?(e=c(a.selector).clone().wrap("<div>").parent().html(),d.update(e)):null!==a.content&&d.update(a.content);d.open();return b},create:function(){b=c("<div class='modal-overlay'>").appendTo("body").hide();null!==a.id&&b.attr("id",a.id);c("<div class='fill'>").appendTo(b).click(function(){d.close()});
$dialog=c("<div class='dialog'>").appendTo(b);null!==a.width&&$dialog.css("width",a.width);null!==a.height&&$dialog.css("height",a.height);null!==a.top&&$dialog.css("top",a.top);c(window).on("resize",function(){$dialog.css("left",(b.width()-$dialog.width())/2)}).trigger("resize");c("<div class='content'>").appendTo($dialog);c("<a class='close' href='javascript:void(0)' title='close'>&times;</a>").appendTo($dialog).click(function(){d.close()});c("<div class='loader'>loading</div>").appendTo($dialog);
return b},update:function(a){null!=b&&(b.find(".content").html(a),b.find(".loader").hide());return b},open:function(){null!=b&&(null!=a.open?a.open.apply(b):b.show());return b},close:function(){null!=b&&(null!=a.close?a.close.apply(b):b.remove());c(window).off("resize");a.id=a.top=a.width=a.height=a.content=a.selector=b=null}};c.modal=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return d.init.apply(this,arguments);c.error("Method "+
a+" does not exist on jQuery.modal")};c.fn.modal=function(a){a=c.extend({selector:this},a);c.modal(a)}})(jQuery);
